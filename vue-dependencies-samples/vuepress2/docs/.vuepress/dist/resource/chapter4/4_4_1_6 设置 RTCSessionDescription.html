<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4.4.1.6 设置 RTCSessionDescription | 大大的标题</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="这是一个描述">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="../assets/css/0.styles.2b7c72d0.css" as="style"><link rel="preload" href="../assets/js/app.cdf1d230.js" as="script"><link rel="preload" href="../assets/js/2.a9f4ac6f.js" as="script"><link rel="preload" href="../assets/js/42.15597946.js" as="script"><link rel="prefetch" href="../assets/js/10.e16cac7a.js"><link rel="prefetch" href="../assets/js/100.548e1455.js"><link rel="prefetch" href="../assets/js/101.24abf376.js"><link rel="prefetch" href="../assets/js/102.9eb21f1d.js"><link rel="prefetch" href="../assets/js/103.f8ec6c60.js"><link rel="prefetch" href="../assets/js/104.a716a17a.js"><link rel="prefetch" href="../assets/js/105.7b79881a.js"><link rel="prefetch" href="../assets/js/106.d36568a9.js"><link rel="prefetch" href="../assets/js/107.a8f24113.js"><link rel="prefetch" href="../assets/js/108.ad8550dd.js"><link rel="prefetch" href="../assets/js/109.75ebdb1c.js"><link rel="prefetch" href="../assets/js/11.c459fe4f.js"><link rel="prefetch" href="../assets/js/110.a167ec03.js"><link rel="prefetch" href="../assets/js/111.264c1605.js"><link rel="prefetch" href="../assets/js/112.85ecd3af.js"><link rel="prefetch" href="../assets/js/113.527d6a16.js"><link rel="prefetch" href="../assets/js/114.fdb48cf0.js"><link rel="prefetch" href="../assets/js/115.26e4a7c6.js"><link rel="prefetch" href="../assets/js/116.7e019b64.js"><link rel="prefetch" href="../assets/js/117.d0e550a3.js"><link rel="prefetch" href="../assets/js/118.74295340.js"><link rel="prefetch" href="../assets/js/119.915bd419.js"><link rel="prefetch" href="../assets/js/12.b37335e5.js"><link rel="prefetch" href="../assets/js/120.e137f15b.js"><link rel="prefetch" href="../assets/js/121.20503efe.js"><link rel="prefetch" href="../assets/js/122.8dd1bd99.js"><link rel="prefetch" href="../assets/js/123.439150a2.js"><link rel="prefetch" href="../assets/js/124.63b1bd33.js"><link rel="prefetch" href="../assets/js/125.273c90da.js"><link rel="prefetch" href="../assets/js/126.9a4a073a.js"><link rel="prefetch" href="../assets/js/127.5fcb88fd.js"><link rel="prefetch" href="../assets/js/128.cbc0ca1c.js"><link rel="prefetch" href="../assets/js/13.90ab8b63.js"><link rel="prefetch" href="../assets/js/14.3c27acc0.js"><link rel="prefetch" href="../assets/js/15.4c125fea.js"><link rel="prefetch" href="../assets/js/16.4488f96f.js"><link rel="prefetch" href="../assets/js/17.2f2ff4ba.js"><link rel="prefetch" href="../assets/js/18.306a9a94.js"><link rel="prefetch" href="../assets/js/19.2cdf0f8d.js"><link rel="prefetch" href="../assets/js/20.34221d1f.js"><link rel="prefetch" href="../assets/js/21.a9131b3b.js"><link rel="prefetch" href="../assets/js/22.3f8ed5d5.js"><link rel="prefetch" href="../assets/js/23.c032ef30.js"><link rel="prefetch" href="../assets/js/24.6ec163bb.js"><link rel="prefetch" href="../assets/js/25.ab48889a.js"><link rel="prefetch" href="../assets/js/26.bc43105e.js"><link rel="prefetch" href="../assets/js/27.00298855.js"><link rel="prefetch" href="../assets/js/28.da80b56e.js"><link rel="prefetch" href="../assets/js/29.60653b22.js"><link rel="prefetch" href="../assets/js/3.e423e0c9.js"><link rel="prefetch" href="../assets/js/30.3b75298a.js"><link rel="prefetch" href="../assets/js/31.4adb85a8.js"><link rel="prefetch" href="../assets/js/32.14005d42.js"><link rel="prefetch" href="../assets/js/33.63332c10.js"><link rel="prefetch" href="../assets/js/34.c17d7de5.js"><link rel="prefetch" href="../assets/js/35.3d4c33cf.js"><link rel="prefetch" href="../assets/js/36.a266397a.js"><link rel="prefetch" href="../assets/js/37.43901b27.js"><link rel="prefetch" href="../assets/js/38.d8edd2b4.js"><link rel="prefetch" href="../assets/js/39.d8aa5513.js"><link rel="prefetch" href="../assets/js/4.84ff89bd.js"><link rel="prefetch" href="../assets/js/40.bd57e5ae.js"><link rel="prefetch" href="../assets/js/41.59f75ee2.js"><link rel="prefetch" href="../assets/js/43.0856031f.js"><link rel="prefetch" href="../assets/js/44.f12c7850.js"><link rel="prefetch" href="../assets/js/45.3011fda6.js"><link rel="prefetch" href="../assets/js/46.fea77535.js"><link rel="prefetch" href="../assets/js/47.7547dc9d.js"><link rel="prefetch" href="../assets/js/48.24621e3a.js"><link rel="prefetch" href="../assets/js/49.71870b9a.js"><link rel="prefetch" href="../assets/js/5.d9c28746.js"><link rel="prefetch" href="../assets/js/50.1d4e7900.js"><link rel="prefetch" href="../assets/js/51.af831802.js"><link rel="prefetch" href="../assets/js/52.04638f89.js"><link rel="prefetch" href="../assets/js/53.7e7f96b0.js"><link rel="prefetch" href="../assets/js/54.8588306e.js"><link rel="prefetch" href="../assets/js/55.a9c644b5.js"><link rel="prefetch" href="../assets/js/56.cafe1e71.js"><link rel="prefetch" href="../assets/js/57.7ac51837.js"><link rel="prefetch" href="../assets/js/58.b37aa35b.js"><link rel="prefetch" href="../assets/js/59.351187d5.js"><link rel="prefetch" href="../assets/js/6.3b9d4d26.js"><link rel="prefetch" href="../assets/js/60.dcc9d9f5.js"><link rel="prefetch" href="../assets/js/61.bacf7351.js"><link rel="prefetch" href="../assets/js/62.63d3b2ed.js"><link rel="prefetch" href="../assets/js/63.b324469c.js"><link rel="prefetch" href="../assets/js/64.846fa177.js"><link rel="prefetch" href="../assets/js/65.f183f0d9.js"><link rel="prefetch" href="../assets/js/66.e57d84a3.js"><link rel="prefetch" href="../assets/js/67.a25869ed.js"><link rel="prefetch" href="../assets/js/68.f1f81331.js"><link rel="prefetch" href="../assets/js/69.b920e71a.js"><link rel="prefetch" href="../assets/js/7.910c14e3.js"><link rel="prefetch" href="../assets/js/70.1b577ef6.js"><link rel="prefetch" href="../assets/js/71.4bd5f658.js"><link rel="prefetch" href="../assets/js/72.dd85b786.js"><link rel="prefetch" href="../assets/js/73.bb4387f4.js"><link rel="prefetch" href="../assets/js/74.da18a018.js"><link rel="prefetch" href="../assets/js/75.94cae234.js"><link rel="prefetch" href="../assets/js/76.10887417.js"><link rel="prefetch" href="../assets/js/77.5962f0b8.js"><link rel="prefetch" href="../assets/js/78.800340dc.js"><link rel="prefetch" href="../assets/js/79.4e83e76a.js"><link rel="prefetch" href="../assets/js/8.c7b4ad32.js"><link rel="prefetch" href="../assets/js/80.4af391f9.js"><link rel="prefetch" href="../assets/js/81.3feab326.js"><link rel="prefetch" href="../assets/js/82.947e005d.js"><link rel="prefetch" href="../assets/js/83.da4cc36d.js"><link rel="prefetch" href="../assets/js/84.b1c8a6c6.js"><link rel="prefetch" href="../assets/js/85.fc9f92b9.js"><link rel="prefetch" href="../assets/js/86.7f7d1c9d.js"><link rel="prefetch" href="../assets/js/87.1e12046a.js"><link rel="prefetch" href="../assets/js/88.f0e0ca94.js"><link rel="prefetch" href="../assets/js/89.f1535b0d.js"><link rel="prefetch" href="../assets/js/9.3ec2836b.js"><link rel="prefetch" href="../assets/js/90.a7deffda.js"><link rel="prefetch" href="../assets/js/91.5911af9f.js"><link rel="prefetch" href="../assets/js/92.d0f4335a.js"><link rel="prefetch" href="../assets/js/93.d636f560.js"><link rel="prefetch" href="../assets/js/94.dbba3a1b.js"><link rel="prefetch" href="../assets/js/95.d4d6ca02.js"><link rel="prefetch" href="../assets/js/96.39fa0625.js"><link rel="prefetch" href="../assets/js/97.fba26ae0.js"><link rel="prefetch" href="../assets/js/98.94a9e4f3.js"><link rel="prefetch" href="../assets/js/99.c3c2ebe6.js">
    <link rel="stylesheet" href="../assets/css/0.styles.2b7c72d0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/../" class="home-link router-link-active"><img src="https://xiao-akatsuki.github.io/axios.org/logo/logo.svg" alt="大大的标题" class="logo"> <span class="site-name can-hide">大大的标题</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/xiao-akatsuki/axios" target="_blank" rel="noopener noreferrer" class="repo-link">
    axios
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/xiao-akatsuki/axios" target="_blank" rel="noopener noreferrer" class="repo-link">
    axios
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h4 id="_4-4-1-6-设置-rtcsessiondescription"><a href="#_4-4-1-6-设置-rtcsessiondescription" class="header-anchor">#</a> <a href="http://w3c.github.io/webrtc-pc/#set-the-rtcsessiondescription" target="_blank" rel="noopener noreferrer">4.4.1.6 设置 RTCSessionDescription<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <p>要在 RTCPeerConnection 对象连接上设置 RTCSessionDescription 描述，请将运行以下步骤加入 connection 的操作队列：</p> <ol><li><p>让 p 成为新的 promise。</p></li> <li><p>同时，按照[JSEP]（第5.5节和第5.6节）中的描述，启动应用 description 的流程。</p> <ol><li><p>如果应用 description 的过程因任何原因失败，则用户代理必须将运行以下步骤的任务加入队列：</p> <ol><li><p>如果 connection 的[[IsClosed]] 值为true，则中止这些步骤。</p></li> <li><p>如果 description 的类型对于当前信令连接状态无效，如[JSEP]（第5.5节和第5.6节）中所述，则使用新创建的 InvalidStateError 错误，p 以拒绝的状态返回这个错误，并中止这些步骤。</p></li> <li><p>如果 description 被设置为本地描述，如果 escription.type 是 offer 并且description.sdp 不等于 connection 的[[LastOffer]]，则创建新的 InvalidModificationError 错误，p 以拒绝的状态返回这个错误，并中止这些步骤。</p></li> <li><p>如果将 description 设置为本地描述，如果 description.type 为“rollback”且信令状态为“stable”，则创建新的 InvalidStateError 错误，p以拒绝的状态返回这个错误，并中止这些步骤。</p></li> <li><p>如果description被设置为本地描述，如果description.type是“answer”或“pranswer”并且description.sdp不等于connection的[[LastAnswer]]，则创建新的 InvalidModificationError 错误，p 以拒绝的状态返回这个错误，并中止这些步骤。</p></li> <li><p>zh: 如果 description 内容不是有效的SDP语法，则使用 RTCError 拒绝 p（将errorDetail设置为“sdp-syntax-error”并将 sdpLineNumber 属性设置为检测到语法错误的SDP中的行号）并中止这些步骤。</p></li> <li><p>如果将 description 设置为远程描述，则连接的 RTCRtcpMuxPolicy 是必需的，远程描述不使用 RTCP mux，然后创建新的 InvalidAccessError 错误，p 以拒绝的状态返回这个错误，并中止这些步骤。</p></li> <li><p>如果 description 内容无效，则创建新的 InvalidAccessError 错误，p 以拒绝的状态返回这个错误，并中止这些步骤。</p></li> <li><p>对于所有其他错误，创建新的 OperationError 错误，p 以拒绝的状态返回这个错误。</p></li></ol></li> <li><p>zh:如果成功应用 description，则用户代理必须对运行以下步骤的任务进行排队：</p> <ol><li><p>如果connection的[[IsClosed]] 值为true，则中止这些步骤。</p></li> <li><p>如果将 description 设置为本地描述，则运行以下步骤之一：</p> <ul><li><p>如果 description 是“offer”类型，则将connection的[[PendingLocalDescription]]设置为从 description 构造出的新 RTCSessionDescription 对象，并将信令状态设置为“have-local-offer”。</p></li> <li><p>如果 description 的类型为“answer”，那么这就完成了 offer/answer 协商。将[[CurrentLocalDescription]]连接到从 description 构造的新 RTCSessionDescription 对象，并设置connection的[[PendingRemoteDescription]]为connection的[[CurrentRemoteDescription]]。将connection的[[PendingRemoteDescription]]和connection的[[PendingLocalDescription]]设置为null。最后将连接的信令状态设置为“stable”。</p></li> <li><p>如果 description 是“rollback”类型，那么这是一个回滚。将connection的[[PendingLocalDescription]]设置为null，并将信令状态设置为“stable”。</p></li> <li><p>如果 description 是“pranswer”类型，则将connection的[[PendingLocalDescription]]设置为从 description 构造出的新 RTCSessionDescription 对象，并将信令状态设置为“have-local-pranswer”。</p></li></ul></li> <li><p>否则，如果将 description 设置为远程描述，则运行以下步骤之一：</p> <ul><li><p>如果将 description 设置为远程描述，如果description.type为“rollback”且信令状态为“stable”，则使用新创建的InvalidStateError拒绝p并中止这些步骤。</p></li> <li><p>如果 description 是“offer”类型，则将connection的[[PendingRemoteDescription]]属性设置为从 description 构造出的新 RTCSessionDescription 对象，并将信令状态设置为“have-remote-offer”。</p></li> <li><p>如果 description 的类型为“answer”，那么这就完成了 offer/answer 协商。将connection的[[CurrentRemoteDescription]]属性设置为从 description 构造出的新 RTCSessionDescription 对象，并设置connection的[[CurrentLocalDescription]]到connection的[[PendingLocalDescription]]。将connection的[[PendingRemoteDescription]]和connection的[[PendingLocalDescription]]设置为null。最后将连接的信令状态设置为“stable”。</p></li> <li><p>如果 description 是“rollback”类型，那么这是一个回滚。将connection的[[PendingRemoteDescription]]设置为 null，并将信令状态设置为“stable”。</p></li> <li><p>如果 description 是“pranswer”类型，则将connection的[[PendingRemoteDescription]]设置为从 description 构造出的新 RTCSessionDescription 对象。最后将连接的信令状态设置为“have-remote-pranswer”。</p></li></ul></li> <li><p>如果 description 是“answer”类型，并且它启动现有 SCTP 关联的关闭，如[SCTP-SDP]第10.3和10.4节中所定义，则将 connection 的[[SctpTransport]]的值设置为null。</p></li> <li><p>如果 description 的类型为“answer”或“pranswer”，则执行以下步骤：</p> <ol><li><p>如果 description 启动了新 SCTP 关联的建立，如[SCTP-SDP]第10.3和10.4节中所定义，则创建一个初始状态为“connecting”的 RTCSctpTransport ，并将结果分配给[[SctpTransport]]。</p></li> <li><p>否则，如果建立了 SCTP 关联，但更新了“max-message-size” SDP 属性，则更新connection的[[SctpTransport]]的最大消息大小。</p></li> <li><p>如果 description 协商 SCTP 传输的 DTLS 角色，并且存在具有空 id 的 RTCDataChannel，则根据[RTCWEB-DATA-PROTOCOL]生成ID。如果无法生成可用的ID，请运行以下步骤：</p> <ol><li><p>设channel为无法生成ID的 RTCDataChannel 对象。</p></li> <li><p>将channel的[[ReadyState]]设置为“closed”。</p></li> <li><p>使用 RTCErrorEvent 接口触发名为 error 的事件，并在 channel 中将 errorDetail 属性设置为“data-channel-failure”。</p></li> <li><p>在 channel 上触发一个名为 close 的事件。</p></li></ol></li></ol></li> <li><p>让trackEventInits，muteTracks，addList和removeList为空列表。</p></li> <li><p>如果将 description 设置为本地描述，则运行以下步骤：</p> <ol><li>对 description 中的每个媒体描述运行以下步骤：
<ol><li><p>如果媒体描述尚未与 RTCRtpTransceiver 对象关联，请运行以下步骤：</p> <ol><li><p>让收发器成为用于创建媒体描述的RTCRtpTransceiver。</p></li> <li><p>将收发器的中间值设置为媒体描述的中间值。</p></li> <li><p>如果收发器的[[Stopped]]为true，则中止这些子步骤。</p></li> <li><p>如果根据[BUNDLE]将媒体描述指示为使用现有媒体传输，则让 transport 和 rtcpTransport 分别为表示该传输的 RTP 和 RTCP 组件的R TCDtlsTransport 对象。</p></li> <li><p>否则，让 transport 和 rtcpTransport 成为新创建的 RTCDtlsTransport 对象，每个对象都有一个新的底层 RTCIceTransport。虽然如果根据[RFC5761]协商 RTCP 多路复用，或者如果需要 connection 的RTCRtcpMuxPolicy，则不要创建任何特定于 RTCP 的传输对象，而是让 rtcpTransport 等于传输。</p></li> <li><p>设置transceiver.[[Sender]].[[SenderTransport]]进行传输。</p></li> <li><p>将transceiver.[[Sender]].[[SenderRtcpTransport]]设置为 rtcpTransport。</p></li> <li><p>设置transceiver.[[接收器]].[[ReceiverTransport]]进行传输。</p></li> <li><p>将transceiver.[[Receiver]].[[ReceiverRtcpTransport]]设置为 rtcpTransport。</p></li></ol></li> <li><p>让收发器成为与媒体描述相关联的 RTCRtpTransceiver。</p></li> <li><p>如果收发器的[[Stopped]]值为true，则中止这些子步骤。</p></li> <li><p>设方向是 RTCRtpTransceiverDirection 值，表示媒体描述的方向。</p></li> <li><p>如果 direction 是“sendrecv”或“recvonly”，则将收发器的[[Receptive]]值设置为true，否则将其设置为false。</p></li> <li><p>如果 description 的类型为“answer”或“pranswer”，则执行以下步骤：</p> <ol><li><p>如果 direction 是“sendonly”或“inactive”，并且收发器的[[FiredDirection]]值是“sendrecv”或“recvonly”，则执行以下步骤：</p> <ol><li><p>给收发器设置相关的transceiver.[[Receiver]]，空列表，另一个空列表和removeList。</p></li> <li><p>在给定收发器和静音轨道的情况下，处理媒体描述的远程轨道的移除。</p></li></ol></li> <li><p>将收发器的[[CurrentDirection]]和[[FiredDirection]]值设置为方向。</p></li></ol></li></ol></li></ol></li> <li><p>如果将 description 设置为远程描述，则运行以下步骤：</p> <ol><li><p>对 description 中的每个媒体描述运行以下步骤：</p> <ol><li><p>设方向是 RTCRtpTransceiverDirection 类型的值，表示来自媒体描述的方向，但发送方式和接收方向相反，以表示此对等方的视图。</p></li> <li><p>如[JSEP]（第5.10节）所述，尝试查找现有的 RTCRtpTransceiver 对象，收发器，以表示媒体描述。</p></li> <li><p>如果未找到合适的收发器（未设置收发器），请执行以下步骤：</p></li> <li><p>从媒体描述创建 RTCRtpSender 对象作为 sender。</p></li> <li><p>从媒体描述创建RTCRtpReceiver 对象作为 receiver。</p></li> <li><p>使用 sender、 receiver 和 值为“recvonly”的 RTCRtpTransceiverDirection 创建一个 RTCRtpTransceiver，并让收发器成为结果。</p></li> <li><p>将收发器的中间值设置为相应媒体描述的中间值。如果媒体描述没有 MID，并且未设置收发器的 mid，则生成随机值，如[JSEP]（第5.10节）中所述。</p></li> <li><p>如果 direction 是 “sendrecv” 或 “recvonly”，则让 msids 成为媒体描述指示收发器的 MSID 列表。[[Receiver]]。[[ReceiverTrack]]将与之关联。否则，让msids为空列表。</p></li> <li><p>给定 transceiver.[[Receiver]]，msids，addList 和 removeList 的相关远程流。</p></li> <li><p>如果上一步增加了 addList 的长度，或者收发器的[[FiredDirection]]值既不是 “sendrecv” 也不是 “recvonly”，则在给定收发器和 trackEventInits 的情况下添加媒体描述的远程轨道。</p></li> <li><p>如果direction是“sendonly”或“inactive”，则将收发器的[[Receptive]]值设置为 false。</p></li> <li><p>如果direction是“sendonly”或“inactive”，并且收发器的[[FiredDirection]]值是“sendrecv”或“recvonly”，则在给定收发器和muteTracks的情况下移除媒体描述的远程轨道。</p></li> <li><p>将收发器的[[FiredDirection]]值设置为方向。</p></li> <li><p>如果描述的类型为 “answer” 或 “pranswer”，则执行以下步骤：</p></li> <li><p>将收发器的[[CurrentDirection]]和[[Direction]]值设置为方向。</p></li> <li><p>根据[BUNDLE]，让 transport 和 rtcpTransport 成为 RTCDtlsTransport 对象，表示收发器相关媒体描述所使用的媒体传输的 RTP 和 RTCP 组件。</p></li> <li><p>设置收发器.[[Sender]].[[SenderTransport]]进行传输。</p></li> <li><p>将收发器.[[Sender]].[[SenderRtcpTransport]]设置为 rtcpTransport。</p></li> <li><p>设置收发器.[[接收器]].[[ReceiverTransport]]进行传输。</p></li> <li><p>将收发器.[[Receiver]].[[ReceiverRtcpTransport]]设置为rtcpTransport。</p></li> <li><p>如果媒体描述被拒绝，并且收发器尚未停止，请停止 RTCRtpTransceiver 收发器。</p></li></ol></li></ol></li> <li><p>如果 description 是 “rollback” 类型，则运行以下步骤：</p> <ol><li><p>如果正在回滚的 RTCSessionDescription 将 RTCRtpTransceiver 的中间值设置为非空值，请将该收发器的中间值设置为 null，如[JSEP]（第4.1.8.2节）所述。</p></li> <li><p>如果通过应用正在回滚的 RTCSessionDescription 创建了 RTCRtpTransceiver，并且没有通过addTrack将轨道连接到它，则从 connection 的收发器集中删除该收发器，如[JSEP]（第4.1.8.2节）所述。</p></li> <li><p>对于保持 connection 的 RTCRtpTransceivers，对正在回滚的 RTCSessionDescription 应用程序所做的[[CurrentDirection]]和[[Receptive]]内部值的任何更改进行还原。</p></li> <li><p>将 connection 的[[SctpTransport]]的值恢复为上次稳定信令状态下的值。</p></li></ol></li> <li><p>如果 connection 的信令状态发生变化，则在连接时触发名为 signalingstatechange 的事件。</p></li> <li><p>对于 muteTracks 中的每个轨道，将轨道的静音状态设置为值true。</p></li> <li><p>对于 removeList 中的每个流和轨道对，从流中删除轨道轨道。</p></li> <li><p>对于 addList 中的每个流和轨道对，将轨道轨道添加到流。</p></li> <li><p>对于 trackEventInits 中的每个条目，使用 RTCTrackEvent 接口触发名为track的事件，其 receiver 属性初始化为 entry.receiver，其 track 属性初始化为entry.track，其 streams 属性初始化为entry.streams，其 receiver 属性初始化为entry .transceiver 在 connection 对象。</p></li> <li><p>如果 connection 的信令状态现在是“stable”，则更新需要协商的标志。如果此更新之前和之后连接的[[NegotiationNeeded]]值均为true，则对运行以下步骤的任务进行排队：</p> <ol><li><p>如果connection的[[IsClosed]]值为true，则中止这些步骤</p></li> <li><p>如果连接的[[NegotiationNeeded]]值为false，则中止这些步骤。</p></li> <li><p>在连接时触发名为 negotiationneeded 的事件。</p></li></ol></li> <li><p>将 p 设为值为 undefined 的 Resolve 状态。</p></li></ol></li></ol></li> <li><p>返回p。</p></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="../assets/js/app.cdf1d230.js" defer></script><script src="../assets/js/2.a9f4ac6f.js" defer></script><script src="../assets/js/42.15597946.js" defer></script>
  </body>
</html>
